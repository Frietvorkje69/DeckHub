<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeckHub - Your Streaming Hub</title>
    <link rel="icon" href="img/icon.png"/>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap');
        body {
            font-family: 'Nunito', sans-serif;
        }

        /* Category container styles */
        .category-container {
            display: flex; /* Arrange categories horizontally */
            flex-wrap: wrap; /* Allow wrapping if needed */
            gap: 20px; /* Spacing between categories */
            max-width: 100vw;
        }

        
    </style>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="dark:bg-zinc-800 bg-gradient-to-b from-purple-900 to-black min-h-screen">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="py-12">
        <div class="flex justify-between items-center">
            <a href="#" class="flex items-center"> <img src="img/logo.png" alt="DeckHub" class="h-12">  </a>
            <button id="filterButton" class="px-4 py-2 text-white rounded bg-gradient-to-r from-transparent to-purple-700 transition-colors hover:bg-purple-700">Filter</button>        </div>

        <div class="mt-4 flex justify-between items-center">
            <div>
                <button id="sortByName" class="px-4 py-2 text-white rounded transition duration-300 hover:bg-gradient-to-b from-transparent to-purple-800">Sort by Name</button>
                <button id="sortByStatus" class="px-4 py-2 text-white rounded transition duration-300 hover:bg-gradient-to-b from-transparent to-purple-800">Sort by Status</button>
                <button id="sortByCategory" class="px-4 py-2 text-white rounded transition duration-300 hover:bg-gradient-to-b from-transparent to-purple-800">Sort by Category</button>
            </div>

            <div class="mt-4 flex justify-center items-right">
                <div class="px-4 py-2 flex items-center">
                    <span class="h-4 w-4 bg-blue-500 rounded-full mr-2"></span>
                    <span class="text-white">Legal</span>
                </div>
                <div class="px-4 py-2 flex items-center">
                    <span class="h-4 w-4 bg-red-500 rounded-full mr-2"></span>
                    <span class="text-white">Illegal</span>
                </div>
            </div>
        </div>
        <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 auto-cols-fr" id="cardContainer"></div>
    </div>
</div>

<div id="overlay" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 hidden flex items-center justify-center">
    <div class="bg-gray-800 rounded-lg overflow-hidden w-96 shadow-xl" style="width: fit-content;">
        <div class="flex justify-between items-center px-4 py-2 bg-purple-800 text-white">
            <h2 class="text-lg font-semibold">Hide/Unhide Services</h2>
            <button id="closeOverlay" class="text-white">&times;</button>
        </div>
        <div class="p-4">
            <div id="filterOptions" class="flex flex-row space-x-2"></div>
        </div>
    </div>
</div>

    <script>
        const services = [
            {
                "name": "Netflix",
                "link": "https://www.netflix.com/",
                "image": "https://bramptonist.com/wp-content/uploads/2018/06/netflix-image.jpg",
                "status": "legal",
                "category": "Streaming"
            },
            {
                "name": "Prime Video",
                "link": "https://www.primevideo.com/",
                "image": "https://th.bing.com/th/id/OIP.7WRaKoAz7CXJ5uHczOx2DwAAAA?rs=1&pid=ImgDetMain",
                "status": "legal",
                "category": "Streaming"
            },
            {
                "name": "Disney+",
                "link": "https://www.disneyplus.com/",
                "image": "https://i.pinimg.com/736x/f1/ea/4b/f1ea4b62940f2ca19b21f6bdfcc1eec4.jpg",
                "status": "legal",
                "category": "Streaming"
            },
            {
                "name": "Hulu",
                "link": "https://www.hulu.com/",
                "image": "https://wallpapercave.com/wp/wp2491671.png",
                "status": "legal",
                "category": "Streaming"
            },
            {
                "name": "HBO Max",
                "link": "https://www.hbomax.com/",
                "image": "https://www.iphon.fr/app/uploads/2019/11/hbo-max-logo.png",
                "status": "legal",
                "category": "Streaming"
            },
            {
                "name": "Paramount+",
                "link": "https://www.paramountplus.com/",
                "image": "https://www.hollywoodreporter.com/wp-content/uploads/2011/06/paramount_logo_2011_a_l.jpg?w=2000&h=1126&crop=1",
                "status": "legal",
                "category": "Streaming"
            },
            {
                "name": "Crunchyroll",
                "link": "https://www.crunchyroll.com/",
                "image": "https://assets.aboutamazon.com/dims4/default/dc6e6ef/2147483647/strip/false/crop/1920x1080+0+0/resize/1200x675!/quality/90/?url=https%3A%2F%2Famazon-blogs-brightspot.s3.amazonaws.com%2Ff8%2F2a%2Fe21459814491b9aac0134bfffaf8%2Fcr-1920x1080.jpg",
                "status": "legal",
                "category": "Anime"
            },
            {
                "name": "AniWave",
                "link": "https://aniwave.to/home",
                "image": "https://cdn2.steamgriddb.com/thumb/1db6c162d8331ec63d1ca1975bff2c1d.jpg",
                "status": "illegal",
                "category": "Anime"
            },
            {
                "name": "HiAnime",
                "link": "https://hianime.to/home",
                "image": "https://www.slashfilm.com/img/gallery/the-entire-attack-on-titan-timeline-explained/intro-1656893069.jpg",
                "status": "illegal",
                "category": "Anime"
            },
            {
                "name": "Animeflix",
                "link": "https://animeflix.live",
                "image": "https://sp.rmbl.ws/s8/1/j/S/6/2/jS62b.qR4e-small-ANIMEFLIX-GREAT-FREE-ANIME-.jpg",
                "status": "illegal",
                "category": "Anime"
            },
            {
                "name": "Animension",
                "link": "https://www.animension.to/",
                "image": "https://m.media-amazon.com/images/M/MV5BYWE1OTM1ZDktNWNiOS00YzM0LTkxNzQtYjE3YTYzY2NjYzIyXkEyXkFqcGdeQXVyNzI3NjY3NjQ@._V1_.jpg",
                "status": "illegal",
                "category": "Anime"
            },
            {
                "name": "Youtube",
                "link": "https://www.youtube.com/",
                "image": "https://cdn2.steamgriddb.com/hero_thumb/4a9f57c5dadf5bc6555a2e754ca3cfa7.jpg",
                "status": "legal",
                "category": "Influencer"
            },
            {
                "name": "Twitch",
                "link": "https://www.twitch.tv/",
                "image": "https://wallpaper.dog/large/20477304.png",
                "status": "legal",
                "category": "Influencer"
            },
            {
                "name": "MoviesJoy",
                "link": "https://moviesjoy.is/home",
                "image": "https://play-lh.googleusercontent.com/FwNsrfV0FUCkDw2BKUDyewEE1zPbzq0VCf1xJmxAMnYCDMKxlgknjDfl_0OHOOVum4o",
                "status": "illegal",
                "category": "Movies"
            },
            {
                "name": "Movies7",
                "link": "https://movies7.to/home",
                "image": "https://editorialge.com/wp-content/uploads/2023/05/Movies7.jpeg",
                "status": "illegal",
                "category": "Movies"
            }
        ];

        const cardContainer = document.getElementById('cardContainer');

        const sortByNameButton = document.getElementById('sortByName');
        const sortByStatusButton = document.getElementById('sortByStatus');
        const sortByCategoryButton = document.getElementById('sortByCategory');


        function sortServices(sortField) {
            const sortedServices = services.sort((a, b) => {
                if (sortField === 'name') {
                    return a.name.localeCompare(b.name);
                } else if (sortField === 'status') {
                    if (a.status === 'legal' && b.status !== 'legal') {
                        return -1;
                    } else if (a.status !== 'legal' && b.status === 'legal') {
                        return 1;
                    } else {
                        return a.status.localeCompare(b.status);
                    }
                } else if (sortField === 'category') {
                    return a.category.localeCompare(b.category);
                }
            });
            renderCards(sortedServices);
            applyFilterPreferences();
        }

        function renderCards(servicesToDisplay) {
            cardContainer.innerHTML = '';

            servicesToDisplay.forEach(service => {
                const card = document.createElement('a');
                card.href = service.link;
                card.classList.add('shadow', 'border-4', `border-${service.status === 'legal' ? 'blue-500' : 'red-500'}`, 'rounded-lg', 'p-4', 'flex', 'items-center', 'justify-center', 'space-y-4', 'h-48', 'w-full', 'hover:animate-pulse', 'hover:scale-105', 'hover:border-white', 'transition-all', 'duration-300');
                card.style.backgroundImage = `url('${service.image}')`;
                card.style.backgroundSize = 'cover';
                card.style.backgroundPosition = 'center';

                const badge = document.createElement('div');
                badge.classList.add(`bg-${service.status === 'legal' ? 'blue-500' : 'red-500'}`, 'rounded-full', 'px-4', 'py-2');
                const stitle = document.createElement('p');
                stitle.textContent = service.name;
                stitle.classList.add('text-lg', 'font-bold', 'text-white');
                badge.appendChild(stitle);

                card.appendChild(badge);
                cardContainer.appendChild(card);
            });
        }

        sortByNameButton.addEventListener('click', () => sortServices('name'));
        sortByStatusButton.addEventListener('click', () => sortServices('status'));
        sortByCategoryButton.addEventListener('click', () => sortServices('category'));
        sortServices('status');

        const filterOptions = document.getElementById('filterOptions');
        const overlay = document.getElementById('overlay');
        const closeOverlayButton = document.getElementById('closeOverlay');

        function toggleOverlay() {
            overlay.classList.toggle('hidden');
        }

        function updateFilterPreferences() {
            const checkboxes = document.querySelectorAll('.filter-checkbox');
            const preferences = {};
            checkboxes.forEach(checkbox => {
                preferences[checkbox.value] = checkbox.checked;
            });
            localStorage.setItem('filterPreferences', JSON.stringify(preferences));
        }

        function renderFilterOptions() {
            filterOptions.innerHTML = '';
            const categoriesMap = new Map();
            services.forEach(service => {
                if (!categoriesMap.has(service.category)) {
                    categoriesMap.set(service.category, []);
                }
                categoriesMap.get(service.category).push(service);
            });

            // Create category containers and populate them with checkboxes
            categoriesMap.forEach((categoryServices, categoryName) => {
                const categoryContainer = document.createElement('div');
                categoryContainer.classList.add('category');

                const categoryTitle = document.createElement('h3');
                categoryTitle.textContent = categoryName;
                categoryTitle.classList.add('text-lg', 'font-semibold', 'text-white', 'mb-2');
                categoryContainer.appendChild(categoryTitle);

                categoryServices.forEach(service => {
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.value = service.name;
                    checkbox.checked = !isServiceHidden(service.name);
                    checkbox.classList.add('filter-checkbox', 'text-indigo-600', 'h-8', 'w-8', 'sm:h-6', 'sm:w-6');
                    checkbox.addEventListener('change', () => {
                        updateFilterPreferences();
                        applyFilterPreferences();
                    });

                    const label = document.createElement('label');
                    label.textContent = service.name;
                    label.classList.add('text-white', 'text-base');

                    const div = document.createElement('div');
                    div.classList.add('flex', 'items-center', 'flex', 'flex-row', 'space-x-2', 'space-y-2');
                    div.appendChild(checkbox);
                    div.appendChild(label);
                    categoryContainer.appendChild(div); // Append checkbox to category container
                });

                filterOptions.appendChild(categoryContainer); // Append category container to filterOptions
            });
        }

        function isServiceHidden(serviceName) {
            const preferences = JSON.parse(localStorage.getItem('filterPreferences')) || {};
            return preferences[serviceName] === false;
        }

        function applyFilterPreferences() {
            const preferences = JSON.parse(localStorage.getItem('filterPreferences')) || {};
            const visibleServices = services.filter(service => preferences[service.name] !== false);
            renderCards(visibleServices);
        }

        document.getElementById('filterButton').addEventListener('click', () => {
            toggleOverlay();
        });

        closeOverlayButton.addEventListener('click', () => {
            toggleOverlay();
        });

        overlay.addEventListener('click', (event) => {
            if (event.target === overlay) {
                toggleOverlay();
            }
        });

        renderFilterOptions();
        applyFilterPreferences();

    </script>
</body>
</html>